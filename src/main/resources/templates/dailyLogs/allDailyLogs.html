<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
            crossorigin="anonymous"></script>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"
    ></script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
          crossorigin="anonymous">
    <script>
        $(function(){
            $("#navbar").load("../partials/navbar.html");
        });
    </script>

    <link rel="stylesheet" href="../bootstrap-datepicker-1.9.0-dist/css/bootstrap-datepicker.min.css" />
    <script src="../bootstrap-datepicker-1.9.0-dist/js/bootstrap-datepicker.min.js"></script>

    <!--    <style>-->
    <!--        .card {-->
    <!--            -->
    <!--        }-->
    <!--    </style>-->

    <title>Register</title>
</head>
<body>
<div id="navbar"></div>
<label for="date"></label>
<input type="text" name="" id="date">

<h6>Create exercise</h6>
<form action="search">
    <label>Search</label>
    <input type="text">
    <input type="submit">
</form>

<div class="result">
    <h3>Result</h3>
</div>
<!--<script>-->
<!--const myCalender = new CalendarPicker('#myCalendarWrapper', {-->
<!--    // options here-->
<!--});</script>-->
<!--<div th:each="item: ${daily_logs}">-->
<!--    <p th:text="${item.getId()}">ID: </p>-->
<!--    <p th:text="${item.getExercise_query()}">Exercises: </p>-->
<!--    <p th:text="${item.getMeals_query()}">Meals: </p>-->
<!--</div>-->

<!--<div class="card" style="width: 18rem;">-->
<!--    <div>-->
<!--        <h1>0</h1>-->
<!--    </div>-->
<!--</div>-->
<!--<div class="card" style="width: 18rem;">-->
<!--    <div>-->
<!--        <h1>0</h1>-->
<!--    </div>-->
<!--</div>-->
<!--<div class="card" style="width: 18rem;">-->
<!--    <div>-->
<!--        <h1>0</h1>-->
<!--    </div>-->
<!--</div>-->
<script>
    $('#date').datepicker({
        autoclose:true
    });

</script>

<script>
    let apiKey = "3cbe6be390fb13028c6f5f48a2e4df8d";
    let apiId = "c1e0a46a";
    let queryItem;
    let url = 'https://trackapi.nutritionix.com/v2/search/instant?query=';

    let form = document.querySelector('form');
    let input = document.querySelector('input[type="text"]');
    let result = document.querySelector('.result');

    function search(e){
        e.preventDefault();
        queryItem = input.value;
        makeRequest(queryItem);
        input.value= "";
    }

    function createFood(name, qty, unit, photo){
        let item = document.createElement('div');
        let foodName = document.createElement('h4');
        let serving = document.createElement('p');
        let img = document.createElement('img');

        item.classList.add('item');
        foodName.innerHTML = name;
        serving.innerHTML = qty+' '+unit;
        img.src = photo;

        result.appendChild(item);
        item.appendChild(img);
        item.appendChild(foodName);
        item.appendChild(serving)

    }

    let requestBody = {
        "query": 'grilled cheese' ,
    }
    // fetch("https://trackapi.nutritionix.com/v2/search/instant", {
    //     headers: {
    //         "x-app-id": "c1e0a46a",
    //         "x-app-key": "3cbe6be390fb13028c6f5f48a2e4df8d",
    //         "Content-Type": "application/json"
    //     },
    //     body: JSON.stringify(requestBody),
    //     method: "POST"
    // }).then(resp => resp.json()).then(data => console.log(data))


    function makeRequest(queryItem) {
        fetch("https://trackapi.nutritionix.com/v2/search/instant", {
            headers: {
                "x-app-id": "c1e0a46a",
                "x-app-key": "3cbe6be390fb13028c6f5f48a2e4df8d",
                "Content-Type": "application/json"
            },
            body: JSON.stringify(requestBody),
            method: "POST"
        }).then(resp => resp.json()).then(data => console.log(data))
    }


    form.addEventListener('submit', search)





</script>

</body>
</html>